(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{20:function(e,t,n){e.exports=n(31)},25:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(17),c=n.n(r),o=(n(25),n(5)),u="https://www.maltemagnussen.com/CA3";function i(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var s=function(){function e(e,n,a){var l={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return n&&null!=t()&&(l.headers["x-access-token"]=t()),a&&(l.body=JSON.stringify(a)),l}function t(){return localStorage.getItem("jwtToken")}return{login:function(t,n,a){var l=e("POST",!0,{username:t,password:n});return fetch(u+"/api/login",l).then(i).then((function(e){var t;t=e.token,localStorage.setItem("jwtToken",t),a(e.roles)}))},logout:function(){localStorage.removeItem("jwtToken")},fetchData:function(t){var n="no role";t.includes("user")&&t.includes("admin")?n="both":t.includes("user")?n="user":t.includes("admin")&&(n="admin");var a=e("GET",!0);return fetch(u+"/api/info/"+n,a).then(i)},fetchSwapi:function(){var t=e("GET",!0);return fetch(u+"/api/info/five",t).then(i)}}}(),m=(n(9),n(12)),E=n(3),f=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){s.fetchSwapi().then((function(e){return r(e)})).catch((function(e){e.status?e.fullError.then((function(e){return console.log(e.code,e.message)})):console.log("Network error")}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Logged in and on Swapi"),l.a.createElement("br",null),l.a.createElement("p",null,"Data fetched from backend:"),l.a.createElement("p",null,JSON.stringify(n)))},p=function(e){var t=e.loggedIn;return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(f,null):l.a.createElement("p",null,"You are not logged in."),l.a.createElement(E.b,{to:"/"},"Back"))};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var g=function(e){var t=e.login,n=e.message,r=Object(a.useState)({username:"",password:""}),c=Object(o.a)(r,2),u=c[0],i=c[1];var s=function(e){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,Object(m.a)({},e.target.id,e.target.value)))};return l.a.createElement("div",null,l.a.createElement("h2",null,"Login"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u.username,u.password)}},l.a.createElement("input",{placeholder:"User Name",id:"username",onChange:s})," ",l.a.createElement("input",{placeholder:"Password",id:"password",type:"password",onChange:s})," ",l.a.createElement("button",{className:"btn btn-primary"},"Login"),l.a.createElement("br",null),l.a.createElement("p",null,n)))},b=function(e){var t=e.roles,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],u=r[1];return Object(a.useEffect)((function(){s.fetchData(t).then((function(e){return u(e)})).catch((function(e){e.status?e.fullError.then((function(e){return console.log(e.code,e.message)})):console.log("Network error")}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Data Received from server"),l.a.createElement("p",null,JSON.stringify(c)),l.a.createElement(E.b,{to:"/swapi"},"Swapi"),l.a.createElement("br",null),l.a.createElement("br",null))},h=(n(30),function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Welcome Page"),l.a.createElement("h6",null,l.a.createElement("ins",null,"After")," having set up the backend:"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("code",null,"npm install")),l.a.createElement("li",null,l.a.createElement("code",null,"npm start"))),l.a.createElement("h6",null,"Common issues:"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"npm audit fix --force"))),l.a.createElement("h6",null,"File overview"),l.a.createElement("label",null,l.a.createElement("i",null,"src/components")),l.a.createElement("br",null),l.a.createElement("ul",{className:"border border-secondary customBorder"},l.a.createElement("li",null,l.a.createElement("code",null,"Welcome.jsx")," - Where you are"),l.a.createElement("li",null,l.a.createElement("code",null,"Swapi.jsx")," - Handles fetch call to the backend (Using",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://swapi.co/"}," ","https://swapi.co/"),")"),l.a.createElement("li",null,l.a.createElement("code",null,"Login.jsx")," - Handles login")),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("i",null,"src/")),l.a.createElement("br",null),l.a.createElement("ul",{className:"border border-secondary customBorder"},l.a.createElement("li",null,l.a.createElement("code",null,"apiFacade.jsx")," - Utility to help with fetching, login/logout"),l.a.createElement("li",null,l.a.createElement("code",null,"App.js")," - Main component, handles routes &"," ",l.a.createElement("code",null,"loggedIn")),l.a.createElement("li",null,l.a.createElement("code",null,"index.js")," - Render component"),l.a.createElement("li",null,l.a.createElement("code",null,"settings.js")," - Holds global settings, such as fetch URLs"),l.a.createElement("span",null,l.a.createElement("i",null,"CSS files"))),l.a.createElement("p",null,l.a.createElement(E.b,{to:"#/login"},"Login")," using the credentials you set in the backend ",l.a.createElement("code",null,"utils\\SetupTestUsers.java")))}),j=n(7),v=function(e){var t=e.roles;return t=t.replace(/\[|\]|\"/g,"").replace(","," & ").toUpperCase(),l.a.createElement("p",null,"Permission: ",t)},O=function(){return l.a.createElement("div",null,"You're trying to access a resource that doesn't exist.")},w=function(e){var t=e.loggedIn;return l.a.createElement("ul",{className:"header"},l.a.createElement("li",null,l.a.createElement(E.c,{exact:!0,activeClassName:"active",to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(E.c,{activeClassName:"active",to:"/login"},"Login")),t?l.a.createElement("li",null,l.a.createElement(E.c,{activeClassName:"active",to:"/swapi"},"Star Wars API")):null)},y=function(e){var t=e.permission,n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],u=r[1],i=Object(a.useState)(""),m=Object(o.a)(i,2),f=m[0],p=m[1],d=Object(a.useState)([]),h=Object(o.a)(d,2),j=h[0],O=h[1];return Object(a.useEffect)((function(){t(c)}),[c]),l.a.createElement("div",null,c?l.a.createElement("div",null,l.a.createElement(v,{roles:j}),l.a.createElement(b,{roles:j}),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){s.logout(),u(!1)}}," ","Logout"," ")):l.a.createElement(g,{login:function(e,t){s.login(e,t,O).then((function(e){p(""),u(!0)})).catch((function(e){e.status?(p("Failed to log in, check your information"),e.fullError.then((function(e){return console.log(e.code,e.message)}))):console.log("Network error")}))},message:f}),l.a.createElement("br",null),l.a.createElement(E.b,{to:"/"},"Back to WelcomePage"))},S=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,null,l.a.createElement(w,{loggedIn:n}),l.a.createElement("div",{className:"container"},l.a.createElement(j.c,null,l.a.createElement(j.a,{exact:!0,path:"/",component:h}),l.a.createElement(j.a,{path:"/login",render:function(){return l.a.createElement(y,{permission:r})}}),l.a.createElement(j.a,{path:"/swapi",render:function(){return l.a.createElement(p,{loggedIn:n})}}),l.a.createElement(j.a,{component:O})))))};c.a.render(l.a.createElement(S,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3d7300f0.chunk.js.map