{"version":3,"sources":["settings.js","apiFacade.jsx","components/Swapi.jsx","components/Login.jsx","components/Welcome.jsx","components/ShowRoles.jsx","App.js","index.js"],"names":["localURL","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","returnVal","makeOptions","method","addToken","body","opts","headers","Accept","getToken","JSON","stringify","localStorage","getItem","login","user","pass","setRoles","options","username","password","fetch","URL","then","token","setItem","roles","logout","removeItem","fetchData","usertype","includes","fetchSwapi","ApiFacade","SwapiContent","useState","data","setData","useEffect","facade","catch","err","e","console","log","code","message","Swapi","loggedIn","to","LogIn","setUser","onChange","evt","target","id","value","onSubmit","preventDefault","placeholder","type","className","LoggedIn","dataFromServer","setDataFromServer","Welcome","rel","href","Show","prettyRoles","replace","toUpperCase","NoMatch","Header","exact","activeClassName","LogInScreen","permission","setLoggedIn","setMessage","ShowRoles","onClick","App","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.913f1679.chunk.js","sourcesContent":["//This file contains the URLs used in the application\r\n//Whenever you need an URL to access an endpoint, add it in here\r\n//and import this file whereever you need the URL\r\n\r\nexport const localURL = \"http://localhost:8080/securitystarter\";\r\nexport const onlineURL = \"??\";","//Change this before deployment (production)\r\nimport { localURL as URL} from \"./settings.js\";\r\nfunction handleHttpErrors(res) {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n}\r\n\r\nconst ApiFacade = () => {\r\n  //Insert utility-methods from a latter step (d) here\r\n  function makeOptions(method, addToken, body) {\r\n    var opts = {\r\n      method: method,\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    };\r\n    if (addToken && loggedIn()) {\r\n      opts.headers[\"x-access-token\"] = getToken();\r\n    }\r\n    if (body) {\r\n      opts.body = JSON.stringify(body);\r\n    }\r\n    return opts;\r\n  }\r\n\r\n  function setToken(token) {\r\n    localStorage.setItem(\"jwtToken\", token);\r\n  }\r\n\r\n  function getToken() {\r\n    return localStorage.getItem(\"jwtToken\");\r\n  }\r\n\r\n  function loggedIn() {\r\n    const loggedIn = getToken() != null;\r\n    return loggedIn;\r\n  }\r\n  \r\n  const fetchSwapi = () => {\r\n    //Remember to always include options from the makeOptions fucntion with >true< as the second parameter\r\n    //if you want to access a protected endpoint\r\n    const options = makeOptions(\"GET\",true); //True add's the token\r\n    return fetch(URL + \"/api/info/five\", options).then(handleHttpErrors);\r\n  }\r\n\r\n  //Roles is passed in as parameter from the LoggedIn component in App.js\r\n  const fetchData = (roles) => {\r\n    //In order to use the correct endpoints we have to check the roles of the user\r\n    let usertype = \"no role\";\r\n    //Currently we have three endpoints: \"user\", \"admin\" and \"both\"\r\n    //so we just check the roles array to see the roles of the logged in user\r\n    //Check line 54-55 in LoginEndpoint.java (backend)\r\n    if (roles.includes(\"user\") && roles.includes(\"admin\")) usertype = \"both\";\r\n    else if (roles.includes(\"user\")) usertype = \"user\";\r\n    else if (roles.includes(\"admin\")) usertype = \"admin\";\r\n    const options = makeOptions(\"GET\",true); //True add's the token\r\n    //The usertype is added to the URL to ensure the right endpoint is used\r\n    return fetch(URL + \"/api/info/\" + usertype, options).then(handleHttpErrors);\r\n  }\r\n\r\n  const login = (user, pass, setRoles) => {\r\n    const options = makeOptions(\"POST\", true, {\r\n      username: user,\r\n      password: pass\r\n    });\r\n    return fetch(URL + \"/api/login\", options)\r\n      .then(handleHttpErrors)\r\n      .then(res => {\r\n        setToken(res.token);\r\n        setRoles(res.roles);\r\n      });\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  };\r\n\r\n  return {\r\n    login,\r\n    logout,\r\n    fetchData,\r\n    fetchSwapi\r\n  };\r\n};\r\n\r\nlet returnVal = ApiFacade();\r\nexport default returnVal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"../apiFacade\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Swapi = ({ loggedIn }) => {\r\n  return (\r\n    <>\r\n      {loggedIn ? <SwapiContent /> : <p>You are not logged in.</p>}\r\n\r\n      <Link to=\"/\">Back</Link>\r\n    </>\r\n  );\r\n};\r\n\r\nconst SwapiContent = () => {\r\n  // MAKE CALL HERE TO APIFACADE HERE AND SHOW IT\r\n  const [data, setData] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    facade\r\n      .fetchSwapi()\r\n      .then(res => setData(res))\r\n      .catch(err => {\r\n        if (err.status) {\r\n          err.fullError.then(e => console.log(e.code, e.message));\r\n        } else {\r\n          console.log(\"Network error\");\r\n        }\r\n      });\r\n  }, []);\r\n  return (\r\n    <>\r\n      <p>Logged in and on Swapi</p>\r\n      <br></br>\r\n      <p>Data fetched from backend:</p>\r\n      <p>{JSON.stringify(data)}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Swapi;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"../apiFacade\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Swapi from \"./Swapi.jsx\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const LogIn = ({ login, message }) => {\r\n    const [user, setUser] = useState({ username: \"\", password: \"\" });\r\n\r\n    function log_in(evt) {\r\n        evt.preventDefault();\r\n        login(user.username, user.password);\r\n    }\r\n\r\n    const onChange = evt => {\r\n        setUser({ ...user, [evt.target.id]: evt.target.value });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n            <form onSubmit={log_in}>\r\n                <input placeholder=\"User Name\" id=\"username\" onChange={onChange} />{\" \"}\r\n                <input\r\n                    placeholder=\"Password\"\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    onChange={onChange}\r\n                />{\" \"}\r\n                <button className=\"btn btn-primary\">Login</button>\r\n                <br></br>\r\n                <p>{message}</p>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const LoggedIn = ({ roles }) => {\r\n    const [dataFromServer, setDataFromServer] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        function update() {\r\n            facade\r\n                .fetchData(roles)\r\n                .then(res => setDataFromServer(res))\r\n                .catch(err => {\r\n                    if (err.status) {\r\n                        err.fullError.then(e => console.log(e.code, e.message));\r\n                    } else {\r\n                        console.log(\"Network error\");\r\n                    }\r\n                });\r\n        }\r\n        update();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <h2>Data Received from server</h2>\r\n            <p>{JSON.stringify(dataFromServer)}</p>\r\n            <Link to=\"/swapi\">Swapi</Link>\r\n            <br></br>\r\n            <br></br>\r\n        </>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport '../Welcome.css';\r\n\r\nconst Welcome = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Welcome Page</h1>\r\n\t\t\t<h6>\r\n\t\t\t\t<ins>After</ins> having set up the backend:\r\n\t\t\t</h6>\r\n\t\t\t<ol>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>npm install</code>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>npm start</code>\r\n\t\t\t\t</li>\r\n\t\t\t</ol>\r\n\t\t\t<h6>Common issues:</h6>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>npm audit fix --force</code>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<h6>File overview</h6>\r\n\t\t\t<label>\r\n\t\t\t\t<i>src/components</i>\r\n\t\t\t</label>\r\n\t\t\t<br />\r\n\t\t\t<ul className=\"border border-secondary customBorder\">\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>Welcome.jsx</code> - Where you are\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>Swapi.jsx</code> - Handles fetch call to the backend (Using\r\n\t\t\t\t\t<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://swapi.co/\">\r\n\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\thttps://swapi.co/\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t)\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>Login.jsx</code> - Handles login\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<br />\r\n\t\t\t<label>\r\n\t\t\t\t<i>src/</i>\r\n\t\t\t</label>\r\n\t\t\t<br />\r\n\t\t\t<ul className=\"border border-secondary customBorder\">\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>apiFacade.jsx</code> - Utility to help with fetching,\r\n\t\t\t\t\tlogin/logout\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>App.js</code> - Main component, handles routes &{' '}\r\n\t\t\t\t\t<code>loggedIn</code>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>index.js</code> - Render component\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<code>settings.js</code> - Holds global settings, such as fetch URLs\r\n\t\t\t\t</li>\r\n\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<i>CSS files</i>\r\n\t\t\t\t</span>\r\n\t\t\t</ul>\r\n\t\t\t<p>\r\n\t\t\t\t<Link to=\"/login\">Login</Link> using the credentials you set in the\r\n\t\t\t\tbackend <code>utils\\SetupTestUsers.java</code>\r\n\t\t\t</p>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Welcome;\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nconst Show = ({ roles }) => {\r\n    let prettyRoles = roles;\r\n    prettyRoles = prettyRoles.replace(/\\[|\\]|\\\"/g, '').replace(',', ' & ').toUpperCase();\r\n\r\n    return (\r\n        <p>Permission: {prettyRoles}</p>\r\n    );\r\n};\r\n\r\nexport default Show;","import React, {useState, useEffect} from 'react';\r\nimport facade from './apiFacade';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {LogIn, LoggedIn} from './components/Login.jsx';\r\nimport WelcomePage from './components/Welcome.jsx';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    NavLink,\r\n    useParams,\r\n    useRouteMatch,\r\n    Link,\r\n    Prompt\r\n} from \"react-router-dom\";\r\nimport Swapi from \"./components/Swapi.jsx\";\r\nimport ShowRoles from \"./components/ShowRoles.jsx\";\r\n\r\nconst App = () => {\r\n\tconst [loggedIn, setLoggedIn] = useState(false);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Router>\r\n\t\t\t\t<Header loggedIn={loggedIn} />\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t\t<WelcomePage />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/login\">\r\n\t\t\t\t\t\t\t<LogInScreen permission={setLoggedIn} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/swapi\">\r\n\t\t\t\t\t\t\t<Swapi loggedIn={loggedIn} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route>\r\n\t\t\t\t\t\t\t<NoMatch />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</Router>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst NoMatch = () => (\r\n\t<div>You're trying to access a resource that doesn't exist.</div>\r\n);\r\n\r\nconst Header = ({loggedIn}) => {\r\n\treturn (\r\n\t\t<ul className=\"header\">\r\n\t\t\t<li>\r\n\t\t\t\t<NavLink exact activeClassName=\"active\" to=\"/\">\r\n\t\t\t\t\tHome\r\n\t\t\t\t</NavLink>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<NavLink activeClassName=\"active\" to=\"/login\">\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</NavLink>\r\n\t\t\t</li>\r\n\t\t\t{loggedIn ? (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink activeClassName=\"active\" to=\"/swapi\">\r\n\t\t\t\t\t\tStar Wars API\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t) : null}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nconst LogInScreen = ({permission}) => {\r\n\tconst [loggedIn, setLoggedIn] = useState(false);\r\n\tconst [message, setMessage] = useState('');\r\n\tconst [roles, setRoles] = useState([]);\r\n\tconst logout = () => {\r\n\t\tfacade.logout();\r\n\t\tsetLoggedIn(false);\r\n\t};\r\n\tconst login = (user, pass) => {\r\n\t\tfacade\r\n\t\t\t.login(user, pass, setRoles)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetMessage('');\r\n\t\t\t\tsetLoggedIn(true);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tif (err.status) {\r\n\t\t\t\t\tsetMessage('Failed to log in, check your information');\r\n\t\t\t\t\terr.fullError.then(e => console.log(e.code, e.message));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('Network error');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n    // Lifts up the state of loggedIn so that we can make routes private.\r\n    useEffect(() => {\r\n        permission(loggedIn);\r\n    }, [loggedIn]);\r\n\r\n    return (\r\n        <div>\r\n            {!loggedIn ? (<LogIn login={login} message={message} />) : (\r\n                <div>\r\n                    <ShowRoles roles={roles} />\r\n                    <LoggedIn roles={roles} />\r\n                    <button className=\"btn btn-primary\" onClick={logout}> Logout  </button>\r\n                </div>)}\r\n            <br></br>\r\n            <Link to=\"/\">Back to WelcomePage</Link>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}